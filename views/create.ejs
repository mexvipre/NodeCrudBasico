<%- include('./partials/header') %>

<!-- Contenedor centrado -->
<div class="container mt-5">
  <div class="columns is-centered">
    <div class="column is-two-thirds-tablet is-half-desktop">
      <h1 class="title has-text-centered">Registrar Nuevo Pasajero</h1>

      <!-- Formulario para el registro de pasajeros -->
      <form action="/create" method="POST">

        <!-- Nombre del Pasajero -->
        <div class="field">
          <label class="label">Nombre del Pasajero</label>
          <div class="control">
            <input class="input is-medium" type="text" name="nombre" placeholder="Nombre del Pasajero" required>
          </div>
        </div>

        <!-- DNI -->
        <div class="field">
          <label class="label">DNI</label>
          <div class="control">
            <input class="input is-medium" type="text" name="dni" placeholder="DNI del Pasajero" required>
          </div>
        </div>

        <!-- Teléfono -->
        <div class="field">
          <label class="label">Teléfono</label>
          <div class="control">
            <input class="input is-medium" type="text" name="telefono" placeholder="Teléfono del Pasajero" required>
          </div>
        </div>

        <!-- Dirección -->
        <div class="field">
          <label class="label">Dirección</label>
          <div class="control">
            <input class="input is-medium" type="text" name="direccion" placeholder="Dirección del Pasajero" required>
          </div>
        </div>

        <!-- Correo Electrónico -->
        <div class="field">
          <label class="label">Correo Electrónico</label>
          <div class="control">
            <input class="input is-medium" type="email" name="email" placeholder="Correo Electrónico del Pasajero" required>
          </div>
        </div>

        <!-- Botón de registro -->
        <div class="field">
          <div class="control">
            <button class="button is-primary is-fullwidth" type="button" id="btn-registrar">Registrar Pasajero</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

<script>
  document.getElementById('btn-registrar').addEventListener('click', function () {
    const form = document.querySelector('form');

    // Validación de campos obligatorios
    const nombre = form.nombre.value.trim();
    const dni = form.dni.value.trim();
    const telefono = form.telefono.value.trim();
    const direccion = form.direccion.value.trim();
    const email = form.email.value.trim();

    if (!nombre || !dni || !telefono || !direccion || !email) {
      Swal.fire({
        icon: 'error',
        title: 'Campos incompletos',
        text: 'Por favor, completa todos los campos antes de registrar.',
        showClass: {
          popup: 'animate__animated animate__shakeX'
        },
        hideClass: {
          popup: 'animate__animated animate__fadeOutUp'
        }
      });
      return; // No continúa si hay campos vacíos
    }

    // Si todos los campos están llenos, mostramos la confirmación
    Swal.fire({
      title: '¿Estás seguro?',
      text: "Vas a registrar un nuevo pasajero.",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Sí, registrar',
      cancelButtonText: 'Cancelar',
      showClass: {
        popup: 'animate__animated animate__fadeInDown'
      },
      hideClass: {
        popup: 'animate__animated animate__fadeOutUp'
      }
    }).then((result) => {
      if (result.isConfirmed) {
        form.submit(); // Ahora sí enviamos el formulario
      }
    });
  });
</script>

<%- include('./partials/footer') %>
