<%- include('./partials/header') %>

<!-- Contenedor centralizado -->
<div class="container has-text-centered mt-5">
  <div class="table-responsive">
    <table class="table is-striped is-bordered is-centered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>DNI</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <!-- Aquí recorremos la lista de pasajeros que pasamos desde el router -->
        <% pasajeros.forEach(pasajero => { %>
          <tr>
            <td><%= pasajero.id_pasajero %></td>
            <td><%= pasajero.nombre %></td>
            <td><%= pasajero.dni %></td>
            <td>
              <!-- Botón de eliminar con icono -->
              <a href="/pasajeros/eliminar/<%= pasajero.id_pasajero %>" class="button is-danger is-light delete-btn">
                <span class="icon">
                  <i class="fas fa-trash-alt"></i>
                </span>
              </a>
              <!-- Botón de ver detalles con icono -->
              <button class="button is-primary is-light see-details-btn" 
              data-id="<%= pasajero.id_pasajero %>" 
              data-nombre="<%= pasajero.nombre %>" 
              data-dni="<%= pasajero.dni %>">
                <span class="icon">
                  <i class="fas fa-eye"></i>  <!-- Icono de ojo -->
                </span>
              </button>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></script>

<script>
  // Cuando el documento esté listo
  document.addEventListener('DOMContentLoaded', function() {
    // Seleccionamos todos los botones con la clase 'see-details-btn'
    const seeDetailsBtns = document.querySelectorAll('.see-details-btn');

    seeDetailsBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const id = this.getAttribute('data-id');
        const nombre = this.getAttribute('data-nombre');
        const dni = this.getAttribute('data-dni');

        // Mostramos los detalles en un SweetAlert2
        Swal.fire({
          title: `<h2 style="margin-bottom: 15px;">Detalles de <span style="color:#007bff;">${nombre}</span></h2>`,
          html: `
            <table style="width: 100%; text-align: left; border-collapse: collapse; font-size: 16px;">
              <tr>
                <td style="padding: 8px; font-weight: bold;">ID:</td>
                <td style="padding: 8px;">${id}</td>
              </tr>
              <tr style="background-color: #f9f9f9;">
                <td style="padding: 8px; font-weight: bold;">Nombre:</td>
                <td style="padding: 8px;">${nombre}</td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">DNI:</td>
                <td style="padding: 8px;">${dni}</td>
              </tr>
            </table>
          `,
          icon: 'info',
          showCloseButton: true,
          confirmButtonText: 'Cerrar',
          customClass: {
            popup: 'animated bounceIn'
          }
        });
      });
    });
  });
</script>

<%- include('./partials/footer') %>
